<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Treks - Himalayan Adventures & Tours</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <style>
/* Inlined styles from css/styles.css */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary: #0A7E8C;
    --secondary: #E85D04;
    --accent: #2D6A4F;
    --neutral-light: #F8F9FA;
    --neutral-dark: #2C3E50;
    --gradient: linear-gradient(135deg, #0A7E8C, #E85D04);
    --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
    --shadow-lg: 0 12px 24px rgba(0,0,0,0.15);
}

body {
    font-family: 'Inter', sans-serif;
    color: var(--neutral-dark);
    line-height: 1.6;
    overflow-x: hidden;
}

/* Smooth Scrolling */
html {
    scroll-behavior: smooth;
}

/* Navigation */
.navbar {
    position: fixed;
    top: 0;
    width: 100%;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-md);
    z-index: 1000;
    transition: all 0.3s ease;
}

.navbar.scrolled {
    background: white;
    box-shadow: var(--shadow-lg);
}

.nav-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 16px 32px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    font-family: 'Playfair Display', serif;
    font-size: 32px;
    font-weight: 900;
    background: var(--gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    cursor: pointer;
    transition: transform 0.3s;
}

.logo:hover {
    transform: scale(1.05);
}

.nav-links {
    display: flex;
    gap: 40px;
    list-style: none;
    align-items: center;
}

.nav-links a {
    text-decoration: none;
    color: var(--neutral-dark);
    font-weight: 600;
    font-size: 15px;
    transition: all 0.3s;
    position: relative;
    padding: 8px 0;
}

.nav-links a::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--gradient);
    transition: width 0.3s;
}

.nav-links a:hover::after {
    width: 100%;
}

.search-container {
    position: relative;
}

.search-bar {
    padding: 10px 16px 10px 40px;
    border: 2px solid #e0e0e0;
    border-radius: 24px;
    outline: none;
    transition: all 0.3s;
    width: 200px;
}

.search-bar:focus {
    border-color: var(--primary);
    width: 280px;
}

.search-icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #999;
    font-size: 18px;
}

.hamburger {
    display: none;
    flex-direction: column;
    gap: 5px;
    cursor: pointer;
    padding: 8px;
}

.hamburger span {
    width: 28px;
    height: 3px;
    background: var(--primary);
    transition: all 0.3s;
    border-radius: 2px;
}

.hamburger.active span:nth-child(1) {
    transform: rotate(45deg) translate(8px, 8px);
}

.hamburger.active span:nth-child(2) {
    opacity: 0;
}

.hamburger.active span:nth-child(3) {
    transform: rotate(-45deg) translate(8px, -8px);
}

/* Hero Section */
.hero {
    margin-top: 70px;
    height: 100vh;
    position: relative;
    overflow: hidden;
}

.hero-slider {
    height: 100%;
    position: relative;
}

.hero-slide {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 1.5s ease-in-out;
}

.hero-slide.active {
    opacity: 1;
}

.hero-slide::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(10,126,140,0.8), rgba(232,93,4,0.6));
    z-index: 1;
}

.hero-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    animation: kenburns 20s ease-out infinite;
}

@keyframes kenburns {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.hero-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: white;
    z-index: 10;
    width: 90%;
    max-width: 1000px;
    animation: fadeInUp 1s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translate(-50%, -40%);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%);
    }
}

.hero-content h1 {
    font-family: 'Playfair Display', serif;
    font-size: 64px;
    font-weight: 900;
    margin-bottom: 24px;
    text-shadow: 2px 4px 8px rgba(0,0,0,0.3);
    line-height: 1.2;
}

.hero-content p {
    font-size: 22px;
    margin-bottom: 40px;
    text-shadow: 1px 2px 4px rgba(0,0,0,0.3);
    font-weight: 300;
    line-height: 1.8;
}

.cta-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
}

.btn-primary, .btn-secondary {
    padding: 16px 40px;
    border: none;
    border-radius: 50px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    text-decoration: none;
    display: inline-block;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.btn-primary {
    background: var(--secondary);
    color: white;
    box-shadow: 0 8px 16px rgba(232,93,4,0.4);
}

.btn-primary:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(232,93,4,0.5);
    background: #ff6b1a;
}

.btn-secondary {
    background: transparent;
    color: white;
    border: 3px solid white;
}

.btn-secondary:hover {
    background: white;
    color: var(--primary);
    transform: translateY(-4px);
}

/* Scroll Indicator */
.scroll-indicator {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
    40% { transform: translateX(-50%) translateY(-20px); }
    60% { transform: translateX(-50%) translateY(-10px); }
}

.scroll-indicator span {
    display: block;
    width: 30px;
    height: 50px;
    border: 3px solid white;
    border-radius: 25px;
    position: relative;
}

.scroll-indicator span::before {
    content: '';
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    animation: scroll 2s infinite;
}

@keyframes scroll {
    0% { top: 10px; opacity: 1; }
    100% { top: 30px; opacity: 0; }
}

/* Section Styling */
.section {
    padding: 100px 32px;
    max-width: 1400px;
    margin: 0 auto;
}

.section-header {
    text-align: center;
    margin-bottom: 64px;
    animation: fadeIn 1s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.section-header h2 {
    font-family: 'Playfair Display', serif;
    font-size: 48px;
    font-weight: 900;
    color: var(--neutral-dark);
    margin-bottom: 16px;
    position: relative;
    display: inline-block;
}

.section-header h2::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background: var(--gradient);
    border-radius: 2px;
}

.section-header p {
    font-size: 20px;
    color: #666;
    font-weight: 300;
}

/* Trek Cards */
.trek-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
    gap: 40px;
}

.trek-card {
    background: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: var(--shadow-md);
    transition: all 0.4s ease;
    cursor: pointer;
    position: relative;
}

.trek-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--gradient);
    opacity: 0;
    transition: opacity 0.4s;
    z-index: 1;
    border-radius: 16px;
}

.trek-card:hover {
    transform: translateY(-12px) scale(1.02);
    box-shadow: var(--shadow-lg);
}

.trek-card:hover::before {
    opacity: 0.1;
}

.trek-image-container {
    position: relative;
    height: 280px;
    overflow: hidden;
}

.trek-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.6s ease;
}

.trek-card:hover .trek-image {
    transform: scale(1.15);
}

.trek-badge {
    position: absolute;
    top: 16px;
    right: 16px;
    background: var(--secondary);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    z-index: 2;
}

.trek-content {
    padding: 28px;
    position: relative;
    z-index: 2;
}

.trek-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 16px;
    color: var(--neutral-dark);
    font-family: 'Playfair Display', serif;
}

.trek-description {
    color: #666;
    font-size: 15px;
    margin-bottom: 20px;
    line-height: 1.7;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.trek-meta {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    margin-bottom: 20px;
    font-size: 14px;
}

.trek-meta span {
    display: flex;
    align-items: center;
    gap: 6px;
    color: #666;
    font-weight: 500;
}

.rating {
    color: var(--secondary);
    font-weight: 700;
}

.trek-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 20px;
    border-top: 1px solid #e0e0e0;
}

.trek-price {
    font-size: 28px;
    font-weight: 900;
    color: var(--primary);
}

.trek-price span {
    font-size: 14px;
    color: #999;
    font-weight: 400;
}

.view-details {
    background: var(--primary);
    color: white;
    padding: 10px 24px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s;
    border: none;
    cursor: pointer;
}

.view-details:hover {
    background: var(--accent);
    transform: translateX(4px);
}

/* Features Section */
.why-section {
    background: linear-gradient(135deg, #f8f9fa 0%, #e8eef2 100%);
    position: relative;
    overflow: hidden;
}

.why-section::before {
    content: '‚õ∞Ô∏è';
    position: absolute;
    font-size: 400px;
    opacity: 0.03;
    top: -100px;
    right: -100px;
    transform: rotate(-15deg);
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 40px;
    position: relative;
    z-index: 1;
}

.feature-card {
    text-align: center;
    padding: 40px 24px;
    background: white;
    border-radius: 16px;
    transition: all 0.4s;
    box-shadow: var(--shadow-sm);
}

.feature-card:hover {
    transform: translateY(-8px) scale(1.05);
    box-shadow: var(--shadow-lg);
}

.feature-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 24px;
    background: var(--gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.feature-title {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 12px;
    color: var(--neutral-dark);
}

.feature-description {
    color: #666;
    line-height: 1.7;
}

/* Testimonials */
.testimonials-container {
    position: relative;
    max-width: 900px;
    margin: 0 auto;
}

.testimonial {
    text-align: center;
    padding: 48px;
    background: white;
    border-radius: 20px;
    box-shadow: var(--shadow-md);
    display: none;
    animation: slideIn 0.6s ease-out;
}

.testimonial.active {
    display: block;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.testimonial-image {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    margin: 0 auto 24px;
    object-fit: cover;
    border: 5px solid var(--primary);
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
}

.testimonial-text {
    font-size: 20px;
    font-style: italic;
    margin-bottom: 24px;
    color: #555;
    line-height: 1.8;
}

.testimonial-author {
    font-weight: 700;
    color: var(--neutral-dark);
    font-size: 18px;
}

.testimonial-stars {
    color: var(--secondary);
    font-size: 24px;
    margin-top: 12px;
}

.slider-nav {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-top: 32px;
}

.dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: #ddd;
    cursor: pointer;
    transition: all 0.3s;
}

.dot.active {
    background: var(--primary);
    width: 40px;
    border-radius: 7px;
}

/* Packages Page */
.packages-hero {
    height: 400px;
    background: linear-gradient(135deg, rgba(10,126,140,0.9), rgba(232,93,4,0.7)), 
                url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920') center/cover;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-align: center;
    margin-top: 70px;
}

.packages-hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: 56px;
    font-weight: 900;
    margin-bottom: 16px;
}

.packages-container {
    display: flex;
    gap: 40px;
    max-width: 1400px;
    margin: 0 auto;
    padding: 64px 32px;
}

.filters-sidebar {
    width: 320px;
    background: white;
    padding: 32px;
    border-radius: 16px;
    box-shadow: var(--shadow-md);
    height: fit-content;
    position: sticky;
    top: 120px;
}

.filters-sidebar h2 {
    font-size: 24px;
    margin-bottom: 32px;
    color: var(--neutral-dark);
    font-weight: 700;
}

.filter-group {
    margin-bottom: 32px;
}

.filter-group h3 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 16px;
    color: var(--neutral-dark);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.filter-option {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.3s;
    padding: 8px;
    border-radius: 8px;
}

.filter-option:hover {
    background: var(--neutral-light);
}

.filter-option input[type="checkbox"] {
    width: 20px;
    height: 20px;
    accent-color: var(--primary);
    cursor: pointer;
}

.filter-option label {
    cursor: pointer;
    font-size: 15px;
    color: #666;
}

.apply-filters-btn {
    width: 100%;
    background: var(--gradient);
    color: white;
    border: none;
    padding: 14px;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.apply-filters-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(10,126,140,0.3);
}

.packages-content {
    flex: 1;
}

.packages-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
    padding: 24px;
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-sm);
}

.results-count {
    font-size: 18px;
    color: #666;
}

.sort-select {
    padding: 12px 20px;
    border: 2px solid #e0e0e0;
    border-radius: 50px;
    outline: none;
    cursor: pointer;
    font-size: 15px;
    font-weight: 600;
    transition: all 0.3s;
}

.sort-select:hover {
    border-color: var(--primary);
}

/* Detail Page */
.detail-hero {
    height: 500px;
    position: relative;
    margin-top: 70px;
    overflow: hidden;
}

.detail-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, transparent 30%, rgba(0,0,0,0.8));
    z-index: 1;
}

.detail-hero-content {
    position: absolute;
    bottom: 48px;
    left: 48px;
    right: 48px;
    color: white;
    z-index: 2;
}

.detail-hero-content h1 {
    font-family: 'Playfair Display', serif;
    font-size: 48px;
    font-weight: 900;
    margin-bottom: 16px;
}

.detail-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 64px 32px;
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 64px;
}

.detail-main {
    background: white;
    padding: 48px;
    border-radius: 20px;
    box-shadow: var(--shadow-md);
}

.detail-section {
    margin-bottom: 48px;
}

.detail-section h2 {
    font-size: 32px;
    margin-bottom: 24px;
    color: var(--neutral-dark);
    font-weight: 700;
    border-bottom: 3px solid var(--primary);
    padding-bottom: 12px;
}

.detail-section h3 {
    font-size: 22px;
    margin: 32px 0 16px;
    color: var(--accent);
}

.included-list {
    list-style: none;
    padding: 0;
}

.included-list li {
    padding: 12px 0;
    border-bottom: 1px solid #f0f0f0;
    display: flex;
    align-items: center;
    gap: 12px;
}

.included-list li:before {
    content: '‚úì';
    color: var(--accent);
    font-weight: 900;
    font-size: 18px;
}

.excluded-list li:before {
    content: '‚úó';
    color: var(--secondary);
}

/* Itinerary Accordion */
.itinerary-accordion {
    margin-top: 32px;
}

.accordion-item {
    background: white;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    margin-bottom: 16px;
    overflow: hidden;
    transition: all 0.3s;
}

.accordion-item:hover {
    border-color: var(--primary);
}

.accordion-header {
    padding: 24px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--neutral-light);
    transition: all 0.3s;
}

.accordion-header:hover {
    background: #e8eef2;
}

.accordion-title {
    font-weight: 700;
    font-size: 18px;
    color: var(--neutral-dark);
}

.accordion-meta {
    font-size: 14px;
    color: #666;
    margin-top: 4px;
}

.accordion-toggle {
    font-size: 24px;
    color: var(--primary);
    transition: transform 0.3s;
}

.accordion-item.active .accordion-toggle {
    transform: rotate(45deg);
}

.accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
}

.accordion-item.active .accordion-content {
    max-height: 600px;
}

.accordion-body {
    padding: 24px;
    line-height: 1.8;
    color: #666;
}

/* Booking Widget */
.booking-widget {
    background: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: var(--shadow-lg);
    position: sticky;
    top: 120px;
}

.widget-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 24px;
    color: var(--neutral-dark);
}

.widget-price {
    font-size: 36px;
    font-weight: 900;
    color: var(--primary);
    margin-bottom: 8px;
}

.widget-price span {
    font-size: 16px;
    color: #999;
    font-weight: 400;
}

.widget-rating {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 32px;
    padding-bottom: 32px;
    border-bottom: 2px solid #f0f0f0;
}

.form-group {
    margin-bottom: 24px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--neutral-dark);
    font-size: 15px;
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 14px;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    transition: all 0.3s;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(10,126,140,0.1);
}

.submit-btn {
    width: 100%;
    background: var(--gradient);
    color: white;
    border: none;
    padding: 16px;
    border-radius: 50px;
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
}

.submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 24px rgba(10,126,140,0.3);
}

.inquiry-btn {
    width: 100%;
    background: white;
    color: var(--primary);
    border: 2px solid var(--primary);
    padding: 14px;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.inquiry-btn:hover {
    background: var(--primary);
    color: white;
}

/* Gallery */
.gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 32px;
}

.gallery-item {
    position: relative;
    overflow: hidden;
    border-radius: 12px;
    cursor: pointer;
    aspect-ratio: 1;
    box-shadow: var(--shadow-sm);
    transition: all 0.3s;
}

.gallery-item:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-md);
}

.gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s;
}

.gallery-item:hover img {
    transform: scale(1.2);
}

/* Reviews Section */
.reviews-container {
    margin-top: 32px;
}

.review-card {
    background: white;
    padding: 32px;
    border-radius: 16px;
    margin-bottom: 24px;
    box-shadow: var(--shadow-sm);
    border-left: 4px solid var(--primary);
}

.review-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.reviewer-info {
    display: flex;
    align-items: center;
    gap: 16px;
}

.reviewer-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
}

.reviewer-name {
    font-weight: 700;
    font-size: 18px;
}

.verified-badge {
    color: var(--accent);
    font-size: 12px;
    font-weight: 600;
}

.review-date {
    color: #999;
    font-size: 14px;
}

.review-stars {
    color: var(--secondary);
    font-size: 18px;
}

.review-text {
    color: #666;
    line-height: 1.8;
    margin-top: 16px;
}

.write-review-btn {
    background: var(--accent);
    color: white;
    border: none;
    padding: 14px 32px;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 24px;
}

.write-review-btn:hover {
    background: var(--primary);
    transform: translateY(-2px);
}

/* Chat Widget */
.chat-widget {
    position: fixed;
    bottom: 32px;
    right: 32px;
    z-index: 1500;
}

.chat-button {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: var(--gradient);
    color: white;
    border: none;
    font-size: 32px;
    cursor: pointer;
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chat-button:hover {
    transform: scale(1.15);
    box-shadow: 0 12px 32px rgba(0,0,0,0.4);
}

.chat-window {
    display: none;
    position: fixed;
    bottom: 120px;
    right: 32px;
    width: 380px;
    height: 550px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 16px 48px rgba(0,0,0,0.3);
    flex-direction: column;
    overflow: hidden;
    animation: slideUp 0.4s ease-out;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.chat-window.active {
    display: flex;
}

.chat-header {
    background: var(--gradient);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.chat-header-title {
    font-weight: 700;
    font-size: 18px;
}

.chat-close {
    background: none;
    border: none;
    color: white;
    font-size: 28px;
    cursor: pointer;
    line-height: 1;
}

.chat-messages {
    flex: 1;
    padding: 24px;
    overflow-y: auto;
    background: #f8f9fa;
}

.chat-message {
    margin-bottom: 16px;
    padding: 14px 18px;
    border-radius: 16px;
    max-width: 80%;
    animation: messageSlide 0.3s ease-out;
}

@keyframes messageSlide {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.chat-message.user {
    background: var(--primary);
    color: white;
    margin-left: auto;
    border-bottom-right-radius: 4px;
}

.chat-message.bot {
    background: white;
    color: var(--neutral-dark);
    border-bottom-left-radius: 4px;
    box-shadow: var(--shadow-sm);
}

.chat-input-area {
    display: flex;
    padding: 20px;
    border-top: 1px solid #e0e0e0;
    gap: 12px;
}

.chat-input {
    flex: 1;
    padding: 14px 20px;
    border: 2px solid #e0e0e0;
    border-radius: 50px;
    outline: none;
    font-size: 15px;
    transition: all 0.3s;
}

.chat-input:focus {
    border-color: var(--primary);
}

.chat-send {
    background: var(--primary);
    color: white;
    border: none;
    padding: 14px 24px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
}

.chat-send:hover {
    background: var(--accent);
}

/* Footer */
.footer {
    background: var(--neutral-dark);
    color: white;
    padding: 80px 32px 32px;
}

.footer-content {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 48px;
    margin-bottom: 48px;
}

.footer-section h3 {
    margin-bottom: 24px;
    color: var(--secondary);
    font-size: 20px;
    font-weight: 700;
}

.footer-section p {
    color: #ccc;
    line-height: 1.8;
}

.footer-section ul {
    list-style: none;
}

.footer-section ul li {
    margin-bottom: 12px;
}

.footer-section a {
    color: #ccc;
    text-decoration: none;
    transition: all 0.3s;
    display: inline-block;
}

.footer-section a:hover {
    color: white;
    transform: translateX(4px);
}

.social-icons {
    display: flex;
    gap: 16px;
    margin-top: 24px;
}

.social-icon {
    width: 48px;
    height: 48px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    font-size: 20px;
}

.social-icon:hover {
    background: var(--primary);
    transform: translateY(-4px);
}

.newsletter-form {
    display: flex;
    gap: 8px;
    margin-top: 16px;
}

.newsletter-input {
    flex: 1;
    padding: 14px;
    border: none;
    border-radius: 50px;
    outline: none;
}

.newsletter-btn {
    background: var(--secondary);
    color: white;
    border: none;
    padding: 14px 28px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
}

.newsletter-btn:hover {
    background: var(--primary);
}

.certifications {
    display: flex;
    gap: 12px;
    margin-top: 16px;
    flex-wrap: wrap;
}

.cert-badge {
    background: rgba(255,255,255,0.1);
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.footer-bottom {
    text-align: center;
    padding-top: 32px;
    border-top: 1px solid rgba(255,255,255,0.1);
    color: #999;
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.8);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    padding: 20px;
    backdrop-filter: blur(5px);
}

.modal.active {
    display: flex;
    animation: fadeIn 0.3s ease-out;
}

.modal-content {
    background: white;
    border-radius: 20px;
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    padding: 48px;
    position: relative;
    animation: modalSlide 0.4s ease-out;
}

@keyframes modalSlide {
    from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 32px;
    cursor: pointer;
    color: #999;
    transition: all 0.3s;
    background: none;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close:hover {
    background: #f0f0f0;
    color: var(--primary);
    transform: rotate(90deg);
}

.modal-title {
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 32px;
    color: var(--neutral-dark);
}

.star-rating {
    display: flex;
    gap: 8px;
    font-size: 36px;
    margin-bottom: 24px;
    cursor: pointer;
}

.star {
    color: #ddd;
    transition: all 0.2s;
}

.star.active {
    color: var(--secondary);
}

.star:hover {
    transform: scale(1.2);
}

/* Lightbox */
.lightbox {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.95);
    z-index: 3000;
    align-items: center;
    justify-content: center;
}

.lightbox.active {
    display: flex;
}

.lightbox-content {
    max-width: 90%;
    max-height: 90%;
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}

.lightbox-close {
    position: absolute;
    top: 32px;
    right: 32px;
    color: white;
    font-size: 48px;
    cursor: pointer;
    background: rgba(0,0,0,0.5);
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.lightbox-close:hover {
    background: rgba(232,93,4,0.8);
    transform: rotate(90deg);
}

/* Contact Page */
.contact-hero {
    height: 400px;
    background: linear-gradient(135deg, rgba(10,126,140,0.9), rgba(232,93,4,0.7)), 
                url('https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?w=1920') center/cover;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-align: center;
    margin-top: 70px;
}

.contact-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 64px 32px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 64px;
}

.contact-form {
    background: white;
    padding: 48px;
    border-radius: 20px;
    box-shadow: var(--shadow-lg);
}

.contact-info {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.info-card {
    background: white;
    padding: 32px;
    border-radius: 16px;
    box-shadow: var(--shadow-md);
}

.info-card h3 {
    font-size: 22px;
    margin-bottom: 20px;
    color: var(--neutral-dark);
}

.info-item {
    display: flex;
    align-items: start;
    gap: 16px;
    margin-bottom: 16px;
    padding: 12px;
    border-radius: 8px;
    transition: all 0.3s;
}

.info-item:hover {
    background: var(--neutral-light);
}

.info-icon {
    font-size: 24px;
    min-width: 30px;
}

.faq-accordion {
    margin-top: 24px;
}

/* About Page */
.about-hero {
    height: 500px;
    background: linear-gradient(135deg, rgba(10,126,140,0.9), rgba(232,93,4,0.7)), 
                url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920') center/cover;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-align: center;
    margin-top: 70px;
}

.team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 40px;
    margin-top: 48px;
}

.team-member {
    background: white;
    padding: 32px;
    border-radius: 20px;
    box-shadow: var(--shadow-md);
    text-align: center;
    transition: all 0.3s;
}

.team-member:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
}

.team-photo {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    margin: 0 auto 24px;
    object-fit: cover;
    border: 5px solid var(--primary);
}

.team-name {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 8px;
}

.team-role {
    color: var(--secondary);
    font-weight: 600;
    margin-bottom: 16px;
}

.team-bio {
    color: #666;
    line-height: 1.7;
}

/* Page Transitions */
.page {
    display: none;
    animation: pageSlide 0.5s ease-out;
}

.page.active {
    display: block;
}

@keyframes pageSlide {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Loading Spinner */
.loading {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 4000;
}

.spinner {
    width: 60px;
    height: 60px;
    border: 5px solid #f3f3f3;
    border-top: 5px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 1024px) {
    .detail-container,
    .contact-container {
        grid-template-columns: 1fr;
    }

    .booking-widget {
        position: static;
    }
}

@media (max-width: 768px) {
    .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        flex-direction: column;
        padding: 24px;
        box-shadow: var(--shadow-lg);
        gap: 20px;
    }

    .nav-links.active {
        display: flex;
    }

    .hamburger {
        display: flex;
    }

    .hero-content h1 {
        font-size: 40px;
    }

    .hero-content p {
        font-size: 18px;
    }

    .section-header h2 {
        font-size: 36px;
    }

    .trek-grid {
        grid-template-columns: 1fr;
    }

    .packages-container {
        flex-direction: column;
    }

    .filters-sidebar {
        width: 100%;
        position: static;
    }

    .chat-window {
        width: calc(100% - 32px);
        right: 16px;
        left: 16px;
    }

    .footer-content {
        grid-template-columns: 1fr;
    }
}

</style>
</head>
<body>
    <!-- Loading Spinner -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="logo" onclick="showPage('home')">Super Treks</div>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home" onclick="showPage('home')">Home</a></li>
                <li><a href="#packages" onclick="showPage('packages')">Packages</a></li>
                <li><a href="#about" onclick="showPage('about')">About</a></li>
                <li><a href="#contact" onclick="showPage('contact')">Contact</a></li>
                <li>
                    <div class="search-container">
                        <span class="search-icon">üîç</span>
                        <input type="text" class="search-bar" placeholder="Search treks..." id="searchBar">
                    </div>
                </li>
            </ul>
            <div class="hamburger" id="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="homePage" class="page active">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-slider">
                <div class="hero-slide active">
                    <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920" alt="Himalayan Mountains" class="hero-image">
                </div>
                <div class="hero-slide">
                    <img src="https://images.unsplash.com/photo-1544735716-392fe2489ffa?w=1920" alt="Mountain Trek" class="hero-image">
                </div>
                <div class="hero-slide">
                    <img src="https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?w=1920" alt="Everest Base Camp" class="hero-image">
                </div>
            </div>
            <div class="hero-content">
                <h1>Infinite Adventures Await</h1>
                <p>Treks, Tours & Expeditions Across Nepal, Bhutan & Beyond<br><strong>Small groups ‚Ä¢ Local experts ‚Ä¢ 100% sustainable</strong></p>
                <div class="cta-buttons">
                    <button class="btn-primary" onclick="showPage('packages')">Explore Packages</button>
                    <button class="btn-secondary" onclick="showPage('contact')">Plan Your Trip</button>
                </div>
            </div>
            <div class="scroll-indicator">
                <span></span>
            </div>
        </section>

        <!-- Featured Treks -->
        <section class="section">
            <div class="section-header">
                <h2>Featured Treks & Tours</h2>
                <p>Handpicked adventures for every explorer</p>
            </div>
            <div class="trek-grid" id="featuredTreks"></div>
        </section>

        <!-- Why Super Treks -->
        <section class="section why-section">
            <div class="section-header">
                <h2>Why Choose Super Treks?</h2>
                <p>Your adventure, our expertise</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üë•</div>
                    <div class="feature-title">Local Guides</div>
                    <p class="feature-description">Expert native guides with deep cultural knowledge and decades of mountain experience</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <div class="feature-title">Safety First</div>
                    <p class="feature-description">Comprehensive safety protocols, quality equipment, and emergency evacuation insurance</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚úÖ</div>
                    <div class="feature-title">Guaranteed Departures</div>
                    <p class="feature-description">Fixed dates with confirmed departures - your adventure is always on</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üå±</div>
                    <div class="feature-title">Eco-Friendly</div>
                    <p class="feature-description">Carbon offset programs and sustainable practices protecting the Himalayas</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìû</div>
                    <div class="feature-title">24/7 Support</div>
                    <p class="feature-description">Round-the-clock assistance during your trek with emergency response team</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üí∞</div>
                    <div class="feature-title">Best Value</div>
                    <p class="feature-description">Competitive pricing with no hidden fees - transparent and fair pricing always</p>
                </div>
            </div>
        </section>

        <!-- Testimonials -->
        <section class="section">
            <div class="section-header">
                <h2>What Our Trekkers Say</h2>
                <p>‚≠ê 4.9/5 from 500+ verified reviews</p>
            </div>
            <div class="testimonials-container" id="testimonialsContainer"></div>
            <div class="slider-nav" id="testimonialDots"></div>
        </section>
    </div>

    <!-- Packages Page -->
    <div id="packagesPage" class="page">
        <div class="packages-hero">
            <div>
                <h1>Explore All Adventures</h1>
                <p style="font-size: 20px; margin-top: 16px;">Discover your perfect Himalayan experience</p>
            </div>
        </div>
        <div class="packages-container">
            <aside class="filters-sidebar">
                <h2>Filters</h2>
                <div class="filter-group">
                    <h3>Destination</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="nepal" checked onchange="applyFilters()">
                        <label for="nepal">Nepal</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="bhutan" onchange="applyFilters()">
                        <label for="bhutan">Bhutan</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="tibet" onchange="applyFilters()">
                        <label for="tibet">Tibet</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="india" onchange="applyFilters()">
                        <label for="india">India</label>
                    </div>
                </div>
                <div class="filter-group">
                    <h3>Trip Type</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="trek" checked onchange="applyFilters()">
                        <label for="trek">Trek</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="tour" onchange="applyFilters()">
                        <label for="tour">Cultural Tour</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="climb" onchange="applyFilters()">
                        <label for="climb">Peak Climbing</label>
                    </div>
                </div>
                <div class="filter-group">
                    <h3>Difficulty</h3>
                    <div class="filter-option">
                        <input type="checkbox" id="easy" onchange="applyFilters()">
                        <label for="easy">Easy</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="moderate" onchange="applyFilters()">
                        <label for="moderate">Moderate</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="challenging" onchange="applyFilters()">
                        <label for="challenging">Challenging</label>
                    </div>
                </div>
                <button class="apply-filters-btn" onclick="applyFilters()">Apply Filters</button>
            </aside>
            <div class="packages-content">
                <div class="packages-toolbar">
                    <div class="results-count" id="resultsCount">Showing all packages</div>
                    <select class="sort-select" id="sortSelect" onchange="sortPackages(this.value)">
                        <option value="popular">Most Popular</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="duration">Duration</option>
                    </select>
                </div>
                <div class="trek-grid" id="allPackages"></div>
            </div>
        </div>
    </div>

    <!-- Trek Detail Page -->
    <div id="detailPage" class="page">
        <div class="detail-hero" id="detailHero">
            <img src="" alt="" class="hero-image" id="detailHeroImage">
            <div class="detail-hero-content">
                <h1 id="detailTitle"></h1>
                <div class="trek-meta" id="detailMeta"></div>
            </div>
        </div>
        <div class="detail-container">
            <div class="detail-main">
                <div class="detail-section">
                    <h2>Overview</h2>
                    <p id="detailOverview" style="font-size: 17px; line-height: 1.9; color: #555;"></p>
                    
                    <h3>What's Included</h3>
                    <ul class="included-list" id="detailIncluded"></ul>
                    
                    <h3>What's Not Included</h3>
                    <ul class="included-list excluded-list" id="detailExcluded"></ul>
                </div>

                <div class="detail-section">
                    <h2>Day-by-Day Itinerary</h2>
                    <div class="itinerary-accordion" id="itineraryAccordion"></div>
                </div>

                <div class="detail-section">
                    <h2>Reviews & Testimonials</h2>
                    <div class="reviews-container" id="reviewsList"></div>
                    <button class="write-review-btn" onclick="openReviewModal()">‚úçÔ∏è Write a Review</button>
                </div>

                <div class="detail-section">
                    <h2>Photo Gallery</h2>
                    <div class="gallery-grid" id="detailGallery"></div>
                </div>
            </div>

            <aside>
                <div class="booking-widget">
                    <h3 class="widget-title">Book This Trek</h3>
                    <div class="widget-price" id="bookingPrice"></div>
                    <div class="widget-rating" id="bookingRating"></div>
                    <form id="bookingForm" onsubmit="submitBooking(event)">
                        <div class="form-group">
                            <label class="form-label">Full Name *</label>
                            <input type="text" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email *</label>
                            <input type="email" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Phone *</label>
                            <input type="tel" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Group Size *</label>
                            <select class="form-select" required>
                                <option value="">Select...</option>
                                <option value="1">1 person</option>
                                <option value="2">2 people</option>
                                <option value="3-5">3-5 people</option>
                                <option value="6+">6+ people</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Preferred Date</label>
                            <input type="date" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Special Requests</label>
                            <textarea class="form-textarea" rows="3"></textarea>
                        </div>
                        <button type="submit" class="submit-btn">Book Now</button>
                        <button type="button" class="inquiry-btn" onclick="showPage('contact')">Custom Trip Inquiry</button>
                    </form>
                </div>
            </aside>
        </div>
    </div>

    <!-- About Page -->
    <div id="aboutPage" class="page">
        <div class="about-hero">
            <div>
                <h1 style="font-family: 'Playfair Display', serif; font-size: 56px; font-weight: 900;">Our Story</h1>
                <p style="font-size: 22px; margin-top: 16px; font-weight: 300;">20+ Years Crafting Himalayan Dreams</p>
            </div>
        </div>
        <div class="section">
            <div style="max-width: 1000px; margin: 0 auto;">
                <h2 style="font-size: 40px; margin-bottom: 24px;">About Super Treks</h2>
                <p style="font-size: 18px; line-height: 1.9; margin: 24px 0; color: #555;">
                    Founded in 2003, Super Treks has been at the forefront of Himalayan adventure travel for over two decades. What started as a small team of passionate mountain guides has grown into Nepal's most trusted trekking and tour operator, serving thousands of adventurers from around the globe.
                </p>
                <p style="font-size: 18px; line-height: 1.9; margin: 24px 0; color: #555;">
                    Our mission is simple: to provide authentic, sustainable, and unforgettable experiences in the world's most magnificent mountains. We believe in responsible tourism that benefits local communities, preserves natural environments, and creates lasting memories for our guests.
                </p>

                <h2 style="font-size: 40px; margin: 64px 0 32px;">Meet Our Team</h2>
                <div class="team-grid">
                    <div class="team-member">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400" class="team-photo" alt="Rajesh Sherpa">
                        <div class="team-name">Rajesh Sherpa</div>
                        <div class="team-role">Founder & Lead Guide</div>
                        <p class="team-bio">20+ years guiding experience with multiple Everest summits. Passionate about sharing Sherpa culture and mountain wisdom.</p>
                    </div>
                    <div class="team-member">
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400" class="team-photo" alt="Sarah Chen">
                        <div class="team-name">Sarah Chen</div>
                        <div class="team-role">Operations Manager</div>
                        <p class="team-bio">Expert in logistics and customer experience with a background in sustainable tourism management.</p>
                    </div>
                    <div class="team-member">
                        <img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400" class="team-photo" alt="Karma Lama">
                        <div class="team-name">Karma Lama</div>
                        <div class="team-role">Senior Guide</div>
                        <p class="team-bio">Cultural expert with 15+ years experience. Specializes in Buddhist heritage tours and high-altitude treks.</p>
                    </div>
                </div>

                <h2 style="font-size: 40px; margin: 64px 0 32px;">Our Commitment to Sustainability</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üåç</div>
                        <h3>Carbon Offset</h3>
                        <p>All our treks are carbon-neutral through verified offset programs</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚ôªÔ∏è</div>
                        <h3>Zero Waste</h3>
                        <p>Leave no trace policy with comprehensive waste management systems</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üèòÔ∏è</div>
                        <h3>Local Hiring</h3>
                        <p>95% of our staff are from local mountain communities</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üéì</div>
                        <h3>Community Support</h3>
                        <p>10% of profits support education in mountain villages</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Page -->
    <div id="contactPage" class="page">
        <div class="contact-hero">
            <div>
                <h1 style="font-family: 'Playfair Display', serif; font-size: 56px; font-weight: 900;">Get in Touch</h1>
                <p style="font-size: 22px; margin-top: 16px; font-weight: 300;">We're here to help plan your perfect adventure</p>
            </div>
        </div>
        <div class="contact-container">
            <div class="contact-form">
                <form id="contactForm" onsubmit="submitContact(event)">
                    <div class="form-group">
                        <label class="form-label">Full Name *</label>
                        <input type="text" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email *</label>
                        <input type="email" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Package Interest</label>
                        <select class="form-select">
                            <option value="">Select a package...</option>
                            <option value="ebc">Everest Base Camp Trek</option>
                            <option value="abc">Annapurna Circuit</option>
                            <option value="langtang">Langtang Valley Trek</option>
                            <option value="bhutan">Bhutan Cultural Tour</option>
                            <option value="custom">Custom Trip</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Message *</label>
                        <textarea class="form-textarea" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Send Message</button>
                </form>
            </div>
            <div class="contact-info">
                <div class="info-card">
                    <h3>Contact Information</h3>
                    <div class="info-item">
                        <span class="info-icon">üìç</span>
                        <div>
                            <strong>Address</strong><br>
                            Thamel, Kathmandu, Nepal
                        </div>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">üìû</span>
                        <div>
                            <strong>Phone</strong><br>
                            +977-1-4567890
                        </div>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">üì±</span>
                        <div>
                            <strong>WhatsApp</strong><br>
                            +977-9841234567
                        </div>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">‚úâÔ∏è</span>
                        <div>
                            <strong>Email</strong><br>
                            info@supertreks.com
                        </div>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">‚è∞</span>
                        <div>
                            <strong>Hours</strong><br>
                            24/7 Support Available
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>Frequently Asked Questions</h3>
                    <div class="faq-accordion">
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">What's the best time to trek?</div>
                                <div class="accordion-toggle">+</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    The best times are Spring (March-May) and Autumn (September-November) when weather is clear and temperatures are moderate.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">Do I need travel insurance?</div>
                                <div class="accordion-toggle">+</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    Yes, travel insurance covering high-altitude trekking and emergency evacuation is mandatory for all our treks.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">How fit do I need to be?</div>
                                <div class="accordion-toggle">+</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    Fitness requirements vary by trek. We recommend regular cardio exercise 2-3 months before your trip. Contact us for specific preparation advice.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion(this)">
                                <div class="accordion-title">Can I customize my itinerary?</div>
                                <div class="accordion-toggle">+</div>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    Absolutely! We specialize in custom trips tailored to your interests, fitness level, and schedule. Contact us to discuss your dream adventure.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Super Treks</h3>
                <p>Nepal's premier adventure travel company, specializing in treks, tours, and expeditions across the Himalayas since 2003.</p>
                <div class="social-icons">
                    <a href="#" class="social-icon">üìò</a>
                    <a href="#" class="social-icon">üì∑</a>
                    <a href="#" class="social-icon">üê¶</a>
                    <a href="#" class="social-icon">üì∫</a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#" onclick="showPage('packages')">All Packages</a></li>
                    <li><a href="#" onclick="showPage('about')">About Us</a></li>
                    <li><a href="#" onclick="showPage('contact')">Contact</a></li>
                    <li><a href="#" onclick="showPage('home')">Travel Guide</a></li>
                    <li><a href="#" onclick="showPage('home')">Blog</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Popular Treks</h3>
                <ul>
                    <li><a href="#" onclick="showTrekDetail(1)">Everest Base Camp</a></li>
                    <li><a href="#" onclick="showTrekDetail(2)">Annapurna Circuit</a></li>
                    <li><a href="#" onclick="showTrekDetail(3)">Langtang Valley</a></li>
                    <li><a href="#" onclick="showTrekDetail(5)">Manaslu Circuit</a></li>
                    <li><a href="#" onclick="showTrekDetail(6)">Upper Mustang</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Newsletter</h3>
                <p>Subscribe for exclusive deals and trek tips</p>
                <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
                    <input type="email" class="newsletter-input" placeholder="Your email" required>
                    <button type="submit" class="newsletter-btn">Join</button>
                </form>
                <div class="certifications">
                    <span class="cert-badge">‚úì TAAN Certified</span>
                    <span class="cert-badge">‚úì NTB Licensed</span>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Super Treks. All rights reserved. | Privacy Policy | Terms & Conditions</p>
        </div>
    </footer>

    <!-- Chat Widget -->
    <div class="chat-widget">
        <button class="chat-button" onclick="toggleChat()">üí¨</button>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <div class="chat-header-title">Chat with Us</div>
                <button class="chat-close" onclick="toggleChat()">√ó</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="chat-message bot">
                    üëã Hi! I'm your Super Treks assistant. How can I help you plan your adventure today?
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." onkeypress="handleChatEnter(event)">
                <button class="chat-send" onclick="sendChatMessage()">Send</button>
            </div>
        </div>
    </div>

    <!-- Review Modal -->
    <div class="modal" id="reviewModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeReviewModal()">√ó</button>
            <h2 class="modal-title">Write a Review</h2>
            <form id="reviewForm" onsubmit="submitReview(event)">
                <div class="form-group">
                    <label class="form-label">Your Name *</label>
                    <input type="text" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Rating *</label>
                    <div class="star-rating" id="starRating">
                        <span class="star" onclick="setRating(1)">‚òÜ</span>
                        <span class="star" onclick="setRating(2)">‚òÜ</span>
                        <span class="star" onclick="setRating(3)">‚òÜ</span>
                        <span class="star" onclick="setRating(4)">‚òÜ</span>
                        <span class="star" onclick="setRating(5)">‚òÜ</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Your Review *</label>
                    <textarea class="form-textarea" rows="5" required></textarea>
                </div>
                <button type="submit" class="submit-btn">Submit Review</button>
            </form>
        </div>
    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <span class="lightbox-close">√ó</span>
        <img class="lightbox-content" id="lightboxImage">
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
    <script>
    // Inlined app.js ‚Äî simplified to use embedded DATA instead of fetching external JSON
    let treksData = [];
    let testimonials = [];
    let currentSlide = 0;
    let currentTestimonial = 0;
    let selectedRating = 0;
    let filteredPackages = [];

    const DATA = {
        "treks": [
            { "id": 1, "title": "Everest Base Camp Trek", "destination": "Nepal", "type": "Trek", "duration": 14, "difficulty": "Moderate", "price": 1299, "rating": 4.9, "reviews": 156, "image": "https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?w=1200", "description": "Experience the ultimate Himalayan adventure with our classic Everest Base Camp trek.", "overview": "The Everest Base Camp Trek is a once-in-a-lifetime adventure that takes you to the foot of the world's highest mountain. This 14-day journey combines spectacular mountain scenery with rich Sherpa culture.", "included": ["Airport transfers", "Accommodation in Kathmandu & teahouses", "All meals during trek", "Experienced guide & porters", "Permits & entrance fees", "First aid kit & emergency equipment"], "excluded": ["International flights", "Nepal visa", "Travel insurance", "Personal expenses & tips", "Emergency evacuation", "Alcoholic beverages"], "itinerary": [{ "day": 1, "title": "Arrival in Kathmandu", "description": "Welcome to Nepal! Transfer to hotel, trek briefing, and welcome dinner.", "distance": "N/A", "elevation": "1,400m" }, { "day": 2, "title": "Fly to Lukla, trek to Phakding", "description": "Scenic mountain flight followed by easy trek through pine forests.", "distance": "8km", "elevation": "2,610m" }, { "day": 3, "title": "Phakding to Namche Bazaar", "description": "Cross suspension bridges, enter Sagarmatha National Park, steep climb to the Sherpa capital.", "distance": "11km", "elevation": "3,440m" }, { "day": 4, "title": "Acclimatization in Namche", "description": "Hike to Everest View Hotel for panoramic mountain views.", "distance": "5km", "elevation": "3,880m" }, { "day": 5, "title": "Namche to Tengboche", "description": "Trek through rhododendron forests to famous monastery.", "distance": "10km", "elevation": "3,860m" }, { "day": 9, "title": "Reach Everest Base Camp", "description": "Finally arrive at the iconic Everest Base Camp at 5,364m!", "distance": "13km", "elevation": "5,364m" } ], "gallery": [ "https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?w=900", "https://images.unsplash.com/photo-1544735716-392fe2489ffa?w=900", "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=900" ] },
            { "id": 2, "title": "Annapurna Circuit Trek", "destination": "Nepal", "type": "Trek", "duration": 16, "difficulty": "Challenging", "price": 1499, "rating": 4.8, "reviews": 132, "image": "https://images.unsplash.com/photo-1544735716-392fe2489ffa?w=1200", "description": "Circle the Annapurna Massif on this legendary trek, crossing Thorong La pass at 5,416m.", "overview": "The Annapurna Circuit offers incredible diversity in landscapes from subtropical forests to high alpine desert.", "included": ["All transfers", "Accommodation & meals", "Guide & porters", "Permits"], "excluded": ["Flights", "Visa", "Insurance", "Tips"], "itinerary": [], "gallery": [] },
            { "id": 3, "title": "Langtang Valley Trek", "destination": "Nepal", "type": "Trek", "duration": 10, "difficulty": "Moderate", "price": 899, "rating": 4.7, "reviews": 98, "image": "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1200", "description": "Explore the stunning Langtang Valley, known as the 'Valley of Glaciers'.", "overview": "The Langtang Valley Trek offers a perfect introduction to Himalayan trekking.", "included": ["Permits", "Accommodation", "Meals", "Guide & porter"], "excluded": ["Kathmandu hotels", "Flights", "Insurance"], "itinerary": [], "gallery": [] },
            { "id": 4, "title": "Bhutan Cultural Tour", "destination": "Bhutan", "type": "Tour", "duration": 8, "difficulty": "Easy", "price": 2499, "rating": 5.0, "reviews": 87, "image": "https://images.unsplash.com/photo-1544735716-392fe2489ffa?w=1200", "description": "Discover the Land of the Thunder Dragon with visits to ancient dzongs and monasteries.", "overview": "Experience the magic of Bhutan, where happiness is valued above GDP.", "included": ["All accommodation", "All meals", "Guide", "Tourism fee"], "excluded": ["International flights", "Visa", "Insurance"], "itinerary": [], "gallery": [] },
            { "id": 5, "title": "Manaslu Circuit Trek", "destination": "Nepal", "type": "Trek", "duration": 18, "difficulty": "Challenging", "price": 1699, "rating": 4.9, "reviews": 64, "image": "https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?w=1200", "description": "Trek around the world's eighth highest mountain through remote villages.", "overview": "Less crowded alternative to Annapurna with authentic Himalayan experience.", "included": ["Permits", "Accommodation", "Meals", "Guide"], "excluded": ["Flights", "Visa", "Insurance"], "itinerary": [], "gallery": [] },
            { "id": 6, "title": "Upper Mustang Trek", "destination": "Nepal", "type": "Trek", "duration": 12, "difficulty": "Moderate", "price": 1799, "rating": 4.8, "reviews": 52, "image": "https://images.unsplash.com/photo-1544735716-392fe2489ffa?w=1200", "description": "Journey to the hidden kingdom of Lo preserving ancient Tibetan Buddhist culture.", "overview": "Remote restricted region with preserved Tibetan culture and stunning desert scenery.", "included": ["Special permits", "Accommodation", "Meals"], "excluded": ["Flights", "Visa", "Insurance"], "itinerary": [], "gallery": [] }
        ],
        "testimonials": [
            { "name": "Sarah Johnson", "country": "USA", "image": "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400", "text": "The Everest Base Camp trek with Super Treks was absolutely incredible! Our guide Rajesh was knowledgeable, patient, and made sure we were safe throughout.", "rating": 5 },
            { "name": "Michael Chen", "country": "Australia", "image": "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400", "text": "Best trekking company in Nepal! The attention to detail and genuine care was outstanding. Already planning my next trek!", "rating": 5 },
            { "name": "Emma Schmidt", "country": "Germany", "image": "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400", "text": "The Annapurna Circuit exceeded all expectations. Perfect organization and commitment to sustainable tourism.", "rating": 5 },
            { "name": "David Martinez", "country": "Spain", "image": "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400", "text": "Outstanding service from start to finish. The guide's local knowledge added so much to the experience!", "rating": 5 }
        ]
    };

    async function loadData() {
        // use embedded DATA to avoid external fetch
        try {
            treksData = DATA.treks || [];
            testimonials = DATA.testimonials || [];
            filteredPackages = [...treksData];
        } catch (err) {
            console.error('Failed to load data', err);
            treksData = [];
            testimonials = [];
            filteredPackages = [];
        }
    }

    // --- rest of app.js logic (rendering, UI bindings, etc.) ---
    function init() {
        renderFeaturedTreks();
        renderTestimonials();
        startHeroSlider();
        startTestimonialSlider();
        setupScrollEffects();
        setupObservers();
        bindUI();
    }

    function bindUI() {
        document.getElementById('hamburger')?.addEventListener('click', toggleMenu);
        document.getElementById('searchBar')?.addEventListener('input', handleSearch);
        document.addEventListener('keydown', handleGlobalKeys);
    }

    function handleGlobalKeys(e) {
        if (e.key === 'Escape') {
            closeReviewModal();
            closeLightbox();
            closeMenu();
        }
    }

    function toggleMenu() {
        const navLinks = document.getElementById('navLinks');
        const hamburger = document.getElementById('hamburger');
        navLinks.classList.toggle('active');
        hamburger.classList.toggle('active');
    }

    function closeMenu() {
        document.getElementById('navLinks')?.classList.remove('active');
        document.getElementById('hamburger')?.classList.remove('active');
    }

    function showPage(page) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        const pageMap = {
            'home': 'homePage',
            'packages': 'packagesPage',
            'detail': 'detailPage',
            'about': 'aboutPage',
            'contact': 'contactPage'
        };
        const id = pageMap[page];
        if (id) document.getElementById(id)?.classList.add('active');
        if (page === 'packages') renderAllPackages();
        window.scrollTo({ top: 0, behavior: 'smooth' });
        closeMenu();
    }

    function startHeroSlider() {
        const slides = document.querySelectorAll('.hero-slide');
        if (!slides.length) return;
        slides.forEach((s, i) => s.style.opacity = i === 0 ? '1' : '0');
        const tl = gsap.timeline({ repeat: -1, defaults: { duration: 1.5, ease: 'power2.inOut' } });
        slides.forEach((s, i) => {
            tl.to(slides[i], { opacity: 1 }, '+=3');
            tl.to(slides[i], { opacity: 0 }, '+=3');
        });
    }

    function setupObservers() {
        const q = (sel) => document.querySelectorAll(sel);
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    gsap.to(entry.target, { autoAlpha: 1, y: 0, duration: 0.8, ease: 'power2.out' });
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.15 });

        q('.trek-card').forEach(el => {
            gsap.set(el, { autoAlpha: 0, y: 20 });
            observer.observe(el);
        });

        q('.feature-card').forEach(el => {
            gsap.set(el, { autoAlpha: 0, y: 20 });
            observer.observe(el);
        });
    }

    function setupScrollEffects() {
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) navbar.classList.add('scrolled'); else navbar.classList.remove('scrolled');
        });
    }

    function renderFeaturedTreks() {
        const container = document.getElementById('featuredTreks');
        if (!container) return;
        const featured = treksData.slice(0, 6);
        container.innerHTML = featured.map(trek => trekCardHTML(trek, true)).join('');
    }

    function renderAllPackages() {
        const container = document.getElementById('allPackages');
        const count = document.getElementById('resultsCount');
        if (!container || !count) return;
        count.textContent = `Showing ${filteredPackages.length} ${filteredPackages.length === 1 ? 'package' : 'packages'}`;
        container.innerHTML = filteredPackages.map(trek => trekCardHTML(trek, false)).join('');
    }

    function trekCardHTML(trek, featured=false) {
        return `
    <div class="trek-card" role="button" tabindex="0" onclick="showTrekDetail(${trek.id})" onkeypress="(event.key==='Enter') && showTrekDetail(${trek.id})">
        <div class="trek-image-container">
            <img src="${trek.image}" loading="lazy" alt="${trek.title}" class="trek-image">
            <div class="trek-badge">${featured ? 'Featured' : trek.type}</div>
        </div>
        <div class="trek-content">
            <div class="trek-title">${trek.title}</div>
            <p class="trek-description">${trek.description}</p>
            <div class="trek-meta">
                <span>üìÖ ${trek.duration} days</span>
                <span>‚õ∞Ô∏è ${trek.difficulty}</span>
                <span class="rating">‚≠ê ${trek.rating} (${trek.reviews || 0})</span>
            </div>
            <div class="trek-footer">
                <div class="trek-price">${trek.price} <span>/ person</span></div>
                <button class="view-details" aria-label="View details for ${trek.title}">View Details ‚Üí</button>
            </div>
        </div>
    </div>
    `;
    }

    function renderTestimonials() {
        const container = document.getElementById('testimonialsContainer');
        if (!container) return;
        container.innerHTML = testimonials.map((t, index) => `
        <div class="testimonial ${index === 0 ? 'active' : ''}">
            <img src="${t.image}" alt="${t.name}" class="testimonial-image">
            <p class="testimonial-text">"${t.text}"</p>
            <div class="testimonial-author">${t.name} - ${t.country}</div>
            <div class="testimonial-stars">${'‚≠ê'.repeat(t.rating)}</div>
        </div>
    `).join('');

        const dots = document.getElementById('testimonialDots');
        if (dots) dots.innerHTML = testimonials.map((_, i) => `<span class="dot ${i===0? 'active':''}" onclick="showTestimonial(${i})"></span>`).join('');
    }

    function showTestimonial(index) {
        document.querySelectorAll('.testimonial').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.slider-nav .dot').forEach(d => d.classList.remove('active'));
        document.querySelectorAll('.testimonial')[index]?.classList.add('active');
        document.querySelectorAll('.slider-nav .dot')[index]?.classList.add('active');
        currentTestimonial = index;
    }

    function startTestimonialSlider() {
        if (!testimonials.length) return;
        setInterval(() => {
            currentTestimonial = (currentTestimonial + 1) % testimonials.length;
            showTestimonial(currentTestimonial);
        }, 6000);
    }

    function applyFilters() {
        const destinations = Array.from(document.querySelectorAll('#nepal, #bhutan, #tibet, #india')).filter(cb=>cb.checked).map(cb=>cb.nextElementSibling.textContent);
        const types = Array.from(document.querySelectorAll('#trek, #tour, #climb')).filter(cb=>cb.checked).map(cb=>cb.nextElementSibling.textContent);
        const difficulties = Array.from(document.querySelectorAll('#easy, #moderate, #challenging')).filter(cb=>cb.checked).map(cb=>cb.nextElementSibling.textContent);

        filteredPackages = treksData.filter(trek => {
            const destMatch = destinations.length===0 || destinations.some(d => trek.destination.toLowerCase().includes(d.toLowerCase()));
            const typeMatch = types.length===0 || types.some(t => trek.type.toLowerCase().includes(t.toLowerCase()));
            const diffMatch = difficulties.length===0 || difficulties.some(d => trek.difficulty.toLowerCase()===d.toLowerCase());
            return destMatch && typeMatch && diffMatch;
        });
        renderAllPackages();
    }

    function sortPackages(criteria) {
        switch(criteria) {
            case 'price-low': filteredPackages.sort((a,b)=>a.price-b.price); break;
            case 'price-high': filteredPackages.sort((a,b)=>b.price-a.price); break;
            case 'duration': filteredPackages.sort((a,b)=>a.duration-b.duration); break;
            default: filteredPackages.sort((a,b)=>b.rating-a.rating);
        }
        renderAllPackages();
    }

    function handleSearch(e) {
        const query = e.target.value.toLowerCase();
        if (query.length > 2) {
            filteredPackages = treksData.filter(trek => trek.title.toLowerCase().includes(query) || trek.description.toLowerCase().includes(query) || trek.destination.toLowerCase().includes(query));
            if (document.getElementById('packagesPage')?.classList.contains('active')) renderAllPackages();
        } else if (query.length === 0) {
            filteredPackages = [...treksData];
            if (document.getElementById('packagesPage')?.classList.contains('active')) renderAllPackages();
        }
    }

    function showTrekDetail(id) {
        const trek = treksData.find(t=>t.id===id);
        if (!trek) return;
        document.getElementById('detailHeroImage').src = trek.image;
        document.getElementById('detailTitle').textContent = trek.title;
        document.getElementById('detailMeta').innerHTML = `
        <span style="color: white;">üìÖ ${trek.duration} days</span>
        <span style="color: white;">‚õ∞Ô∏è ${trek.difficulty}</span>
        <span style="color: white;">üìç ${trek.destination}</span>
        <span style="color: white;">‚≠ê ${trek.rating}/5 (${trek.reviews} reviews)</span>
    `;
        document.getElementById('detailOverview').textContent = trek.overview || trek.description;
        document.getElementById('bookingPrice').innerHTML = `${trek.price} <span>/ person</span>`;
        document.getElementById('bookingRating').innerHTML = `<span class="rating" style="font-size:20px;">‚≠ê ${trek.rating}/5</span> <span style="color:#666;">(${trek.reviews} reviews)</span>`;
        document.getElementById('detailIncluded').innerHTML = (trek.included||[]).map(i=>`<li>${i}</li>`).join('');
        document.getElementById('detailExcluded').innerHTML = (trek.excluded||[]).map(i=>`<li>${i}</li>`).join('');
        if ((trek.itinerary||[]).length>0) {
            document.getElementById('itineraryAccordion').innerHTML = (trek.itinerary||[]).map(day=>`
            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <div>
                        <div class="accordion-title">Day ${day.day}: ${day.title}</div>
                        ${day.distance? `<div class="accordion-meta">ü•æ ${day.distance} | üìç ${day.elevation}</div>`: ''}
                    </div>
                    <div class="accordion-toggle">+</div>
                </div>
                <div class="accordion-content"><div class="accordion-body">${day.description}</div></div>
            </div>
        `).join('');
        }
        renderReviews();
        if ((trek.gallery||[]).length>0) document.getElementById('detailGallery').innerHTML = trek.gallery.map(img=>`<div class="gallery-item" onclick="openLightbox('${img}')"><img src="${img}" loading="lazy" alt="Trek photo"></div>`).join('');
        showPage('detail');
    }

    function submitBooking(e) { e.preventDefault(); alert('‚úÖ Thank you for your booking request! We will contact you within 24 hours to confirm details.'); e.target.reset(); }
    function submitContact(e) { e.preventDefault(); alert('‚úÖ Thank you for contacting us! We will respond to your inquiry within 24 hours.'); e.target.reset(); }
    function subscribeNewsletter(e) { e.preventDefault(); alert('‚úÖ Thank you for subscribing! Check your email for exclusive deals and trek tips.'); e.target.reset(); }

    function renderReviews() {
        const reviews = [
            { name: "John Smith", rating: 5, date: "2 weeks ago", text: "Absolutely amazing experience! Our guide was fantastic and the views were incredible.", verified: true },
            { name: "Lisa Wang", rating: 5, date: "1 month ago", text: "Best trek of my life. Super Treks took care of everything seamlessly.", verified: true },
            { name: "Carlos Rodriguez", rating: 4, date: "2 months ago", text: "Great trek with professional guides. Highly recommended!", verified: true }
        ];
        document.getElementById('reviewsList').innerHTML = reviews.map(review=>`
        <div class="review-card">
            <div class="review-header">
                <div class="reviewer-info">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100" class="reviewer-avatar" alt="${review.name}">
                    <div>
                        <div class="reviewer-name">${review.name}</div>
                        ${review.verified? '<div class="verified-badge">‚úì Verified Trekker</div>':''}
                        <div class="review-date">${review.date}</div>
                    </div>
                </div>
                <div class="review-stars">${'‚≠ê'.repeat(review.rating)}</div>
            </div>
            <p class="review-text">${review.text}</p>
        </div>
    `).join('');
    }

    function toggleAccordion(header) {
        const item = header.parentElement;
        const wasActive = item.classList.contains('active');
        document.querySelectorAll('.accordion-item').forEach(i=>i.classList.remove('active'));
        if (!wasActive) item.classList.add('active');
    }

    function toggleChat() { document.getElementById('chatWindow')?.classList.toggle('active'); }
    function handleChatEnter(e) { if (e.key === 'Enter') sendChatMessage(); }

    function sendChatMessage() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        if (!message) return;
        const messagesContainer = document.getElementById('chatMessages');
        messagesContainer.innerHTML += `<div class="chat-message user">${escapeHtml(message)}</div>`;
        input.value = '';
        setTimeout(()=>{
            let botResponse = "Thank you for your message! ";
            const m = message.toLowerCase();
            if (m.includes('price')||m.includes('cost')) botResponse += "Our treks range from $899 to $2499. Would you like details about a specific trek?";
            else if (m.includes('book')) botResponse += "Visit our packages page or fill out the booking form on any trek detail page.";
            else if (m.includes('difficulty')||m.includes('fit')) botResponse += "We offer treks for all fitness levels. Would you like recommendations based on your experience?";
            else botResponse += "A team member will contact you shortly. Call us at +977-1-4567890 or WhatsApp +977-9841234567.";
            messagesContainer.innerHTML += `<div class="chat-message bot">${botResponse}</div>`;
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }, 800);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function openReviewModal() { const modal = document.getElementById('reviewModal'); modal.classList.add('active'); trapFocus(modal); }
    function closeReviewModal() { const modal = document.getElementById('reviewModal'); modal.classList.remove('active'); releaseFocusTrap(); selectedRating = 0; updateStarDisplay(); }

    function setRating(rating) { selectedRating = rating; updateStarDisplay(); }
    function updateStarDisplay(){ document.querySelectorAll('.star').forEach((star,i)=>{ if (i<selectedRating){ star.textContent='‚òÖ'; star.classList.add('active'); } else { star.textContent='‚òÜ'; star.classList.remove('active'); }}); }
    function submitReview(e){ e.preventDefault(); if (selectedRating===0){ alert('‚ö†Ô∏è Please select a rating!'); return; } alert('‚úÖ Thank you for your review! It will be published after verification.'); closeReviewModal(); e.target.reset(); }

    function openLightbox(src){ const lb = document.getElementById('lightbox'); lb.classList.add('active'); document.getElementById('lightboxImage').src = src; trapFocus(lb); }
    function closeLightbox(){ const lb = document.getElementById('lightbox'); lb.classList.remove('active'); releaseFocusTrap(); }

    let _focusTrap = null;
    function trapFocus(container){ const focusable = container.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'); if (!focusable.length) return; const first = focusable[0]; const last = focusable[focusable.length-1]; first.focus(); _focusTrap = (e)=>{ if (e.key === 'Tab'){
            if (e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
            else if (!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
        }
        if (e.key === 'Escape'){ container.classList.remove('active'); releaseFocusTrap(); }
    }; document.addEventListener('keydown', _focusTrap);
    }
    function releaseFocusTrap(){ if (_focusTrap) document.removeEventListener('keydown', _focusTrap); _focusTrap = null; }

    function escapeHtml(s){ return s.replace(/[&<>'\"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"})[c]); }

    window.addEventListener('DOMContentLoaded', async ()=>{
        await loadData();
        init();
        document.getElementById('bookingForm')?.addEventListener('submit', submitBooking);
        document.getElementById('contactForm')?.addEventListener('submit', submitContact);
        document.querySelector('.newsletter-form')?.addEventListener('submit', subscribeNewsletter);
        document.getElementById('reviewForm')?.addEventListener('submit', submitReview);
    });
    </script>
</body>
</html>